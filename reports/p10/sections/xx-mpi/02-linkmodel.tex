\clearpage
%\begin{algorithm}[H]
%    \DontPrintSemicolon
%    \SetKwFunction{FLinkmodel}{Linkmodel}
%    \SetKwProg{Fn}{Function}{}{}
%
%    \Fn{\FLinkmodel{links}}{
%        \ForEach{$l \in $ links}{
%            neighbours $\leftarrow$ findNeighbourhood($l$)\;
%            \ForEach{$neighbour \in neighbours$}{
%                C $\leftarrow r(l, neighbour)$ // The autocorrelation %function\;
%
%                $\Sigma \leftarrow \sigma^2$C // The covariance matrix\;
%            }
%        }
%    }
%
%    \caption{Pseoducode for the linkmodel}
%    \label{algo:linkmodel}
%\end{algorithm}

\paragraph{Link Model} \



\begin{algorithm}[H]
    \DontPrintSemicolon
    \SetKwFunction{FLinkmodel}{Linkmodel}
    \SetKwProg{Fn}{Function}{}{}

    \Fn{\FLinkmodel{links}}{
        model $\leftarrow$ An unordered map with id as key and RSSI as value\;\;

        \ForEach{$l$ $\in$ links}{
            fading $\leftarrow$ 0\;

            \ForEach{$k$ $\in$ links}{
                \If{$k$ $\neq$ $l$ \KwAnd nodes($k$) $\cap$ nodes($l$) = $\emptyset$}{
                    \KwContinue\;
                }
                \ElseIf{$l$ $=$ $k$}{
                    corr $\leftarrow$ 1\;
                }
                \Else{
                    angle $\leftarrow \theta$($l$, $k$)\;
                    corr $\leftarrow$ $r$(angle)\;
                }
                
                
                ran $\leftarrow$ Pick a random value from a gaussian distribution with mean $=$ 0, and standard deviation $=$ 1\;
                fading $\leftarrow$ fading + ran $\cdot$ corr\;

            }
            %\tcp{distanceFading $\leftarrow l_d$($d$($l$))}
            model[l.id] = $tx_{power}$ - (fading)\;
        }
    }
    \caption{Pseoducode for the linkmodel}
    \label{algo:linkmodel}
\end{algorithm}
\smallbreak

$d(link)$ computes the distance of a link.

$\theta(l, link2)$ computes the angle between two links.

$r(angle)$ is the autocorrelation function.

%$l_d(distance)$ computes the pathloss for the distance dependent part.

%\begin{algorithm}[H]
%    \DontPrintSemicolon
%    \SetKwFunction{FCorrelation}{Correlation}
%    \SetKwProg{Fn}{Function}{}{}
%
%    \Fn{\FCorrelation{angle}}{
%        \If{angle > 180}{
%            angle $\leftarrow$ 360 - angle\;
%        }
%
%        \Return angle / 180\;
%    }
%
%    \caption{Pseoducode for the Correlation}
%    \label{algo:correlation_func}
%\end{algorithm}